---
title: csapp-chapter8
date: 2017-04-10 14:55:22
tags: csapp
categories: STUDY
---
chapter 8 REVIEW

<!--more-->
### 异常

异常(exception):控制流中的突变

事件(event):状态变化

当处理器检测到有事件发生时，他就会通过一张叫做异常表(exception table)的跳转表，进行到一个间接的过程调用（异常），到一个专门设计用来处理这类事件的操作系统子程序（异常处理程序(exception handler)）

#### 异常和过程调用
- 过程调用时，处理器将返回地址压入栈，一般为下一条指令的地址，但是根据异常的类型， 处理器有可能压入当前指令的地址，也有可能压入下一条指令的地址
- 异常的时候，处理器会把额外的一些状态压入栈
- 如果控制从一个用户程序转到内核，所有项目都被压入内核栈中，而不是压入用户栈
- 异常处理程序运行在**内核模式**，他们对所有系统资源都有完全的访问模式

#### 异常的分类
- 中断（interrupt）:异步，来自I/O设备。除了它，其他所有异常统称故障指令（faulting instruction），且都是同步的
- 陷阱（trap）:同步，有意的异常，最重要的用途是在用户程序和内核之间提供一个像过程一样的接口，叫做**系统调用**
- 故障（fault）:处理程序若能修复这个错误情况，就返回引起故障的指令，否则abort
- 终止（abort）:通常为硬件错误导致的不可恢复的致命错误

### 进程（process）
用户通过向shell输入一个可执行目标文件的名字，并运行一个程序时，shell会创建一个新的进程，然后在这个新进程的上下文中运行这个可执行目标文件。
进程提供给应用程序的关键抽象：

- 一个独立的逻辑控制流，它提供一个假象，好像程序独占使用处理器
- 一个私有的地址空间，它提供一个假象，好像程序独占使用存储器系统

#### 并行和并发
多个流并发的执行成为并发（concurrency）。一个进程和其他进程轮流云从称谓多任务（multitasking）。如果两个流并发的运行在不同处理器核或者计算机上，我们称它为并行流（parallel flow）。
#### 用户模式和内核模式
处理器用控制寄存器中一个模式位（mode bit）描述进程的运行模式，如果设置了模式位，进程运行在内核模式中，否则运行在用户模式中。运行应用程序代码的进程初始是在用户模式中。进程从用户模式转变为内核模式的方法是通过诸如中断，故障或者陷阱这样的异常。
Linux下，用户模式进程可以通过／proc文件系统访问内核数据结构的内容。
#### 上下文切换（context switch）
操作系统内核使用上下文切换的方式来实现多任务。内核为每个进程维持一个上下文，包括各种寄存器和页表，进程表和文件表。内核可以通过调度器（scheduler）调度进程。
### 进程控制
to be continue...
